<template>
  <div class="kvk-container">
    <div @scroll="onScroll" id="scroller" class="item-a-kvk">
      
        <h1 class="kvkHeading1" style="margin-top:0px;">Slaying The Dragon</h1>
        <p class="kvkHeading2">Moscow, 1974</p>
        <p class="story">
          The 1978 match showed us some unusual ways in which behavioral
          patterns can be interpreted or misinterpreted. We now look at another
          example that further illustrates the role of pattern recognition
          within grandmaster-level chess, but in a much more controlled
          environment that allows us to analyze the statistical patterns on the
          chessboard more&nbsp;carefully.
        </p>
        <p class="kvkHeading2">The Opening</p>
        <p class="story">
          “The successful choice of opening is a great skill (not only in the
          chess sense, but also psychologically)”, says Karpov. Click through
          the selection of opening positions to the right to get a sense of the
          variety of opening strategies.
        </p>
        <p class="story">
          The study of opening theory includes developing a vocabulary of the
          opening move sequences collected from centuries of precedent in the
          Encyclopedia of Chess Openings (ECO). These moves have become known as
          book moves and account for approximately the first ten moves of the
          game.
        </p>
        <p class="story">
          Openings can be visualized as tree diagrams, with each branch tracing
          a variation of a particular line through each move. Different lines
          give the game a different shape. Will it be the “open” Sicilian or the
          “closed” variation? Is it the Queen’s Gambit “accepted”, or
          “declined?” Players commonly decide which line to take based on their
          own preferred playing style and that of their&nbsp;opponent.
        </p>
        <p class="story">
          In Karpov’s words, “It is necessary to understand yourself and your
          opponent, and to use this knowledge in concrete situations on the
          chessboard; to deviate from the strongest continuation in order to
          place your opponent in a position he does not like to play.”
        </p>
        <p class="story">
          In game two of the 1974 Candidates Final, Karpov opened with e4, the
          King’s Pawn Opening. This is by far the most common first move for
          White due in part to the way it controls the center squares, a key
          objective in the opening phase. Korchnoi responded with c5, which
          initiates the Sicilian Defense, another common&nbsp;opening.
        </p>
        <p class="story">
          The game continued in a rather straightforward line until Korchnoi
          deviated with 5.g6. Follow each player's red-colored move selections
          in the flow diagram to the right as you step through the next few
          moves in the opening&nbsp;sequence.
        </p>
        <p class="story">
          As it turns out, Karpov had made a good study of Korchnoi,
          anticipating 5.g6, which marks the “Sicilian Dragon” variation of
          Black’s position. It is named the “Dragon” for the way Black’s pawns
          trace the snake-like profile of a dragon, with the soon-to-arrive
          bishop on g7 defending the King and breathing fire across the board,
          from f6 down to a1.
        </p>
        <p class="story">
          “The so-called Dragon variation. Korchnoi is probably the strongest
          player today who still employs it. In particular, this opening was
          twice used by him in his candidates match in 1971 with Geller,” Karpov
          states, ”of course, in 1974 I did not overlook the possibility of
          meeting this&nbsp;variation.”
        </p>
        <p class="story">
          When Karpov sees the formation of the Dragon, he quickly switches
          plans from castling King-side, to castling Queen-side beginning with
          Be3, which he will use to sever the dragon’s head (Bg7) and begin
          marching up the weakened King-side. The next several moves follow a
          common theme when players have castled on opposite flanks,
          characterized by a rush to castle and use their rooks as battering
          rams to open a path to the King. White inevitably forces the exchange
          of bishops on the 17th move with Bh6.
        </p>
        <p class="kvkSubHead">Misperceptions</p>
        <p class="story">
          Bobby Fischer has pointed to the memorization component of chess to
          support his theory that the game is largely predetermined. Fischer
          took this a step further with his frequently repeated claim that the
          entire 1985 World Chess Championship was rigged. The basis of this
          conspiracy is placed entirely on the occurrence of 18 consecutive
          moves landing on white squares during game four of Karpov’s match
          against Kasparov.
        </p>
        <p class="story">
          Chess, Chance and Conspiracy studies the probability of this claim by
          first acknowledging that “luck and/or randomness have no apparent role
          in move selection when the game is played at the highest levels.” The
          author also notes that while it may not be worth breathing oxygen into
          the musings of someone with Fischer’s “diminished faculties”, his
          claim has gained support by other grandmasters, including none other
          than Boris Spassky, whom Fischer took the title from in 1972.
        </p>
        <p class="story">
          This research began by testing the significance of such a phenomenon
          against the 5,540 total moves played in the 144 games encompassing
          both players’ WCC records. This initial test returned a p-value of
          0.0105, which is far from what one would call statistically
          significant. The research found that even when reducing the criterion
          to practical restrictions such as legal moves, the presence of black
          or white Bishops, and other covariates, calculations returned a
          p-value no lower than 0.0065.
        </p>
        <p class="story">
          The author then turns his study to Fischer himself by searching for
          similar runs in Fischer’s 827 games found on Chessbase’s Big 2000
          database.
        </p>
        <p class="story">
          After running the same test and applying the same criteria as before,
          Segal found that a 13-move sequence in Fischer vs. Reshevsky from 1957
          returned a p-value of 0.0023. Still a relatively weak argument, it
          would amount to the strongest evidence yet to indicate any
          irregularity in this type of underlying pattern. The data shows yet
          another example of a grandmaster-level chess player distracted by
          patterns that aren’t&nbsp;there.
        </p>
        <p class="story">
          As we follow the game from its root to outer-most branch, the amount
          of game data distributed accross the narrowing list of viable moves
          becomes less and less. The weakening precedent makes this type of
          visualization more helpful in the opening stage of the game than in
          the middle game.
        </p>
        <p class="story">
          Meanwhile, one of Korchnoi's top priorities at this stage is removing
          the Bishop aimed straight at his King from b3.
        </p>
        <p class="story">
          He forces the issue with Nc4, forking the Queen and Bishop to make the
          next move an easy choice for White.
        </p>
        <p class="story">
          The opening development is commonly based on predefined patterns that
          can, at times, resemble a game of Rock, Paper, Scissors. So it is
          unsurprising to find that Karpov's own annotation of this game has
          very little to say about any specific move until about move 16.
        </p>
        <p class="story">
          Nde2 earned Karpov the coveted “!!” in chess notation that indicates a
          “brilliant” move. Karpov himself notes, “the withdrawl of the Knight
          from the center has a logical basis. The square c3, very important for
          White's pieces, is becoming the focus of Black's attention. It is on
          this square that a typical exchange sacrifice often occurs (Rxc3),
          with a strong attack for Black.”
        </p>
        <p class="kvkSubHead">The element of time</p>
        <p class="story">
          “Until this point, Korchnoi and I had both been playing at blitz
          speed” remarks Karpov.” His last move, Rd3!, is another deviation from
          the theoretical position of the game and has caused Korchnoi to pause.
          His overextended Knight standing guard on f6 is the only thing
          preventing certain death after Qh7+. Exerting pressure on this Knight
          is the key to the castle for Karpov and his long game has begun to
          show its teeth.
        </p>
        <p class="story">
          When two opponents have castled on opposite corners of the board, the
          game becomes razor sharp. Spotting disturbances in the sequence of
          moves becomes critical and the fact that they have been playing “at
          blitz speed” up until now demonstrates the power of pattern
          recognition at this level.
        </p>
        <p class="story">
          The Effects of Time Pressure on Chess Skill is one of many studies
          that evaluate this relationship. The authors examined the correlations
          between chess rankings and time controls using two
          similar-but-different methods. They start by identifying the two main
          thought processes at play; pattern recognition and deep search.
        </p>
        <p class="story">
          When pattern recognition and the ability to think ten moves ahead are
          understood respectively as “fast” and “slow” processes, evaluating
          this temporality can reveal insights into the more precise roles that
          these abilities play.
        </p>
        <p class="story">
          Their research does, in fact, show that as time pressure increases,
          its relationship with player strength increases. This would indicate
          that sensitivity to pattern recognition is highest under time&nbsp;pressure.
        </p>
        <p class="story">
          While the authors highlight the fact that this positive trend is
          weaker for grandmasters than for less skilled players, I argue that
          not only does the positive trend remain, but that this can be
          accounted for by the fact that grandmasters generally make less
          mistakes than novices. Grouping the data in Fig. 1 by game format,
          rather than title shows this pattern more clearly.
        </p>
        <p class="story">
          Even more conclusive is the exhaustive study conducted in Response
          Time Distributions in Rapid Chess, where researchers acquired
          rapid-chess game data from Free Internet Chess Server in order to
          conduct a series of experiments that focus primarily on the time
          recorded between each move. They found that, “time pressure provokes a
          selective enhancement of rapid object recognition, favoring the best
          players.”
        </p>
        <p class="story">
          We have seen the way that this “selective enhancement” can entice
          players to find meaning in empty signifier, but the authors of this
          research contend that, “in perfect play, the best move is solely a
          function of the position and should not depend on how this position
          was reached or in other elements of the history of the previous
          moves.”
        </p>
        <p class="story">
          They go on to assert that humans are incapable of maintaining this
          static relationship with the board position and that, “the existence
          of plans and schemes, the influence of previous thoughts and
          evaluations, the assessment of the opponent ability in deciding
          whether to gamble on a risky move, and in particular, the presence of
          a time constrain, are likely to be reflected in an interaction between
          successive moves.”
        </p>
        <p class="kvkHeading2">The Middle Game</p>
        <p class="story">
          At this point in Karpov’s annotation of the game, we follow him as he
          entertains a number of possible responses to various moves while
          pointing out the themes on the board that make these either good or
          bad decisions. Board awareness and the ability to recognize the shape
          of the game inform each player on what strategy to&nbsp;take.
        </p>
        <p class="story">
          The two main openings in this game were the Open Sicilian Defense and
          eventually the Yugoslav Attack. Both of these openings use flank
          strategies that helped to determine the asymmetrical shape of this
          position. Rahim Rajahi, a well known figure in the West Village chess
          community, believes that the Open Sicilian gives you “less space but
          more&nbsp;time.”
        </p>
        <p class="story">
          Here, Korchnoi might be in trouble but his Queen and Rook pose very
          serious threats if White is not careful. Karpov points out that “in
          such positions you must ‘sit on your hands’; i.e., not rush to make
          pretty moves. It is still not too late to lose.” Likewise, Karpov’s
          attack on the King-side is made possible in part by his castling on
          the opposite end of the board.
        </p>
        <p class="kvkHeading2">The End Game</p>
        <p class="story">
          Korchnoi resigns after briefly giving chase to the long-awaited
          26. Qxh7+. Rajahi observes that “grandmasters don’t play the books or
          the lines, they play each&nbsp;other.”
        </p>
        <p class="story">
          Karpov was prepared for Korchnoi by studying his behavioral patterns
          far beyond this single game. He attributes his win merely to “the
          wrong choice of opening variation.” This is, of course, an over
          simplification. The reason it was the wrong opening variation is
          because Karpov was prepared for it in granular&nbsp;detail.
        </p>
        <p class="story">
          Developing tactics and strategy based on your opponent’s tendencies is
          the mark of a grandmaster. The conditions required to treat the board
          as Sigman’s “state function” simply cannot be met with the presence of
          humans. Book moves and minor tactical combinations become second
          nature at this level, forcing the grandmaster to take into account
          human factors outside of the board.
        </p>
        <h1 class="kvkHeading1">Conclusion</h1>
        <p class="story">
          If we are to use the research cited here as our guide, it would appear
          as if Viktor Korchnoi struggled to distinguish meaningful cues from
          meaningless information in 1974, and even more so in 1978. Korchnoi
          failed to anticipate Karpov’s strategy in game two of the 1974 match
          in spite of available data and plenty of personal experience with the
          man.
        </p>
        <p class="story">
          We saw this again in 1978 when his awareness and accounting of
          external factors were much more apparent, however misguided, in
          viewing Karpov and his delegation as if some twisted version of the
          Mechanical Turk.
        </p>
        <p class="story">
          Karpov on the other hand, while demonstrating an acute sensitivity to
          all manner of plots and schemes, was able to discipline his own
          paranoia in order to exploit that of his opponent. As previously
          stated, Korchnoi’s attitudes towards parapsychology were well-known by
          1978, and it would be naive to claim that Karpov was not aware of this
          when he invited his own parapsychologist to the&nbsp;Philippines.
        </p>
        <p class="story">
          Are there parallels to be drawn between the pressures experienced by a
          grandmaster-level chess player and those of our own “disinformation”
          age?
        </p>
        <p class="story">
          Consider the state of mind of a person experiencing this drama unfold
          through an extended drip of imminent threats, plots, conspiracies and
          other developments. Today’s fragmented, 24-hour news cycle conditions
          us to consume vast amounts of complex information in microseconds, and
          from a screen the size of a credit card.
        </p>
        <p class="story">
          Whether the information we are receiving comes from polling data,
          marinated quail’s eggs, or YouTube Q-Anon videos, we are often
          required to digest this stimuli under similar stresses.
        </p>
        <p class="story">
          If this saga from 1978 strikes anyone as somehow “binge-worthy”, I
          would argue that this has less to do with my gifts as a storyteller,
          and more to do with similarities between the way time is experienced
          in a bizarre, grandmaster-level chess tournament, and the way we
          experience time today.
        </p>
        <p class="story">
          We have seen plenty of evidence that shows the increasing difficulty
          of connecting the dots in a high pressure environment. Gary Kasparov
          once described chess as a “laboratory of cognition.” I argue that
          today, we find ourselves the guinea pigs in a grand experiment of a
          similar nature, but with much higher stakes.
        </p>
      <!-- <div class="block">
        <button @click="previousMove" id="previous" type="button">
          &#60;
        </button>
        <button @click="nextMove" id="next" type="button">
          &#62;
        </button>
        <p class="ticker">{{this.moveIndex +1 }} of {{this.moves.length}}</p>
      </div> -->
      <p v-if="moveIndex < 2" class="scroll">Scroll Down</p>
    </div>
    <div class="item-b-kvk">
      <div id="board"></div>
      <div v-if="moveIndex > 1 && moveIndex < 3">
        <div class="posNav" style="padding-top: 18px;">
          <div class="posBlock" style="width: 400px">
            <p
              class="posButton"
              @click="previousPos"
              id="previousPos"
              type="button"
            >
              &#60;
            </p>
            <p class="standBy">{{ openings[positionIndex].move }}</p>
            <p @click="nextPos" class="posButton" id="nextPos" type="button">
              &#62;
            </p>
          </div>
        </div>
      </div>
    </div>
    <div v-if="moveIndex == 3" class="item-c">
      <div style="height:100%">
        <img class="kvk-image" src="../assets/kotovTree.png" />
      </div>
      <p class="teaserAttribute">
        <span style="color:red;">Alexander Kotov's opening tree.</span
        ><br />Kotov, A. Think Like a Grandmaster. London: Batsford, 1995.
      </p>
    </div>
    <LowerThird :moveIndex="moveIndex"></LowerThird>
    <Sankey :moveIndex="moveIndex"></Sankey>
    <div
      v-if="moveIndex > 34 && moveIndex < 42"
      class="item-c-kvk"
      style="width: 400px"
    >
      <div style="padding-top: 18px;">
        <p class="annotationMove">{{ annotation[moveIndex - 35].move }}</p>
        <p class="annotation">{{ annotation[moveIndex - 35].text }}</p>
      </div>
    </div>
    <div
      v-if="moveIndex > 44 && moveIndex < 61"
      class="item-c-kvk"
      style="width: 400px"
    >
      <div style="padding-top: 18px;">
        <p class="annotationMove">
          {{ annotationPartTwo[moveIndex - 45].move }}
        </p>
        <p class="annotation">{{ annotationPartTwo[moveIndex - 45].text }}</p>
      </div>
    </div>
    <div class="bottom"></div>
  </div>
</template>
<script>
import * as d3 from "d3";
import ChessBoard from "chessboardjs-vue";
import LowerThird from "../components/LowerThird.vue";
// import ChessBoard from './ChessBoard.vue';
import Sankey from "../components/Sankey.vue";
// import Cors from "./Correlations.vue";
// import Story from "../components/Story.vue";
import moves from "../assets/moves.json";
import openings from "../assets/openings.json";

import annotation from "../assets/Annotation.json";
import annotationPartTwo from "../assets/AnnotationPartTwo.json";

export default {
  name: "KvK",
  components: {
    LowerThird,
    // ChessBoard,
    Sankey,
  },
  data() {
    return {
      d3: d3,
      positionIndex: 0,
      moveIndex: 0,
      moves: moves,
      scrollTop: 0,
      openings: openings,
      annotation: annotation,
      annotationPartTwo: annotationPartTwo,
    };
  },
  created() {
    window.addEventListener("resize", this.myEventHandler);
  },
  unmounted() {
    window.removeEventListener("resize", this.myEventHandler);
  },
  mounted: function() {
    // this.startPos = this.cb.position(this.opening[this.positionIndex].fen);
    this.scroller = document.getElementById("scroller");
    this.moves = moves;
    this.opening = openings;
    this.cb = ChessBoard("board", "start");
  },
  updated() {
    if (this.moveIndex < 2) {
     this.cb.position("start")
    }
    if (this.moveIndex > 1 && this.moveIndex < 3) {
     this.cb.position(this.opening[this.positionIndex].fen)
    }
     if (this.moveIndex > 2 && this.moveIndex < 62 ) {
     this.makeMove();
    }
  },
  computed: {
    getMove() {
      return this.moveIndex;
    },
    getPos() {
      return this.positionIndex;
    },
  },
  methods: {
    onScroll(event) {
      console.log(this.scroller.scrollY, event);
      console.log(this.scroller.scrollTop);
      console.log(this.moveIndex);
      this.moveIndex = Math.floor(this.scroller.scrollTop / 200);
      // this.makeMove();
    },
    makeMove() {
      this.cb.position(this.moves[this.getMove].fen);
    },
    nextPos() {
      if (this.positionIndex == 10) {
        return;
      } else {
        this.positionIndex = this.positionIndex + 1;
        this.makePos();
      }
    },
    previousPos() {
      if (this.positionIndex == 0) {
        return;
      } else {
        this.positionIndex = this.positionIndex - 1;
        this.makePos();
      }
    },
    // startPos(){
    //   this.cb.position(this.opening[this.positionIndex].fen);
    // },
    makePos() {
      this.cb.position(this.opening[this.getPos].fen);
    },
    myEventHandler() {
      this.cb.resize();
    },
  },
};
</script>
